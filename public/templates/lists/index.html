<!-- START INDEX HEADER -->
<div class="row" id="index-header">
  <!-- SELECTED TAGS -->
  <div class="col-xs-12">
    <div class="row">
      <div class="col-xs-6">
        <div id="selected-tags-wrapper">
          <span ng-repeat="tag in selectedTags" class="selected-tag">
            <h5>{{ tag.name }}</h5><span ng-click="removeTag($index)" class="selected-tag-exit">x</span>
          </span>
        </div>
      </div>
    </div>

  </div>
  <!-- END SELECTED TAGS -->

  <!-- TAG FILTER FORM -->
  <div class="col-xs-12 col-sm-5">
    <div class="row">
      <label id="tag-filter-label" class="col-xs-5">Filter by Tag</label>
      <input id="tag-search" type="search" ng-model="tagSearch" class="col-xs-7 form-control form-horizontal">
    </div>
    
    <ul ng-show="filtering()" id="filtering-tags">
      <div class="filtered-tag-wrapper" ng-repeat="tag in tags | filter:{name: tagSearch}">
        <li class="filtered-tag" ng-click="filterByTag(tag)">{{ tag.name }}</li><br>
      </div>
    </ul>

  </div>
  <!-- END TAG FILTER FORM -->
  

  <!-- INDEX FILTER SELECT -->
  <div class="col-xs-12 col-sm-3">
    <select ng-model="filterOption" ng-change="filterByOption()" class="form-control" id="filter-lists">
      <option value="Popular" ng-selected>Popular</option>
      <option value="Recent">Recent</option>
    </select>

  </div>

  <!-- FORM BUTTONS  -->
  <div class="col-xs-12 col-sm-4">
    <button class="btn-success btn new-list-btn pull-right" ng-if="currentUser" ng-click="showNewList()">New List</button>
          
    <a class="btn-success btn new-list-btn pull-right" ng-if="!currentUser" href="/users/sign_in">New List</a>
  </div>

  <div class="col-xs-12" id="popular-tags">
    <div ng-repeat="tag in popularTags" class="popular-tag clickable">
      <h5 ng-click="filterByTag(tag)">{{ tag.name }}</h5>
    </div>

  </div>


  

</div>
<!-- END INDEX HEADER -->

<!-- LISTS HERE -->
<div class="row" id="lists">
  <div ng-repeat="list in lists | filter:withTags" class="col-xs-12 col-lg-6">
    <div class="list">
      <!-- top row -->
      <div class="row list-header">
        <div class="col-xs-3">
          <p class="vote-count">{{ voteCount(list) }}</p>

          
        </div>

        <div class="col-xs-3">
          <i ng-click="upvote(list)" class="fa fa-arrow-up fa-2x clickable" aria-hidden="true"></i>
          <i ng-click="downvote(list)" class="fa fa-arrow-down fa-2x clickable" aria-hidden="true"></i>
        </div>


        <div class="col-xs-3">
          <i ng-click="handleFavorite(list)" class="fa fa-star fa-2x clickable" aria-hidden="true" ng-if="currentUser && favorited(list)"></i>
          <i ng-click="handleFavorite(list)" class="fa fa-star-o fa-md fa-2x clickable" aria-hidden="true" ng-if="currentUser && !favorited(list)"></i>

          <a href="/users/sign_in">
            <i class="fa fa-star-o fa-md fa-2x clickable" aria-hidden="true" ng-if="!currentUser"></i>
          </a>
        </div>

        <div class="col-xs-3">
          <a ng-click="browseList(list)" class="browse-list clickable">Browse</a>
        </div>
      </div>

      <div class="row">
        <div class="col-xs-12">
          <h2 class="text-center list-title clickable" ui-sref="lists.show({id: list.id})">{{ list.title }}</h2><br>
        </div>
      </div>

      <div id="display-tags-wrapper" class="row">
        <div class="col-xs-12 text-center">
          <div ng-repeat="tag in list.tags" class="display-tag clickable">
            <h5 ng-click="filterByTag(tag)">{{ tag.name }}</h5>
          </div>
          
        </div>
      </div>

      <div class="row">
        <div class="col-xs-12">
          <p class="text-center publisher text-success">Published by <span ui-sref="users.show({id: list.user.id})" class="clickable">{{ list.user.username }}</span></p>
        </div>
      </div>

      <div class="row description-wrapper">
        <div class="col-xs-12">
          <p class="text-center description">{{ list.description }}</p>
        </div>
      </div>
      
      
      
      
      

      <div class="row links">
        <div ng-repeat="link in listLinks(list)" class="col-xs-12">
          <a ng-href="{{generatePath(link.url)}}" target="_blank" class="text-center">
            <p class="center-block link-url clickable text-primary">{{ link.url }}</p>
          </a>
          <p class="text-center link-description">{{ link.description }}</p>
        </div>
      </div>

      <div class="row">
        <div class="col-xs-12">
          <button class="btn btn-primary center-block" ui-sref="lists.show({id: list.id})">View Comments</button>
        </div>
      </div>
    </div>
  </div>
</div>